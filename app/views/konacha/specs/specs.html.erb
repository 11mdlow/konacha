<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>Konacha Tests</title>
    <%= stylesheet_link_tag "mocha",   :debug => false %>
    <%= stylesheet_link_tag "konacha", :debug => false %>
    <%= javascript_include_tag "mocha", "chai", "konacha/#{Konacha.mode}", :debug => false %>
    <script>
      mocha.setup({ui: <%= raw Konacha.interface.to_json %>, reporter: Konacha.Reporter});

      var expect = chai.expect,
          should = chai.should(),
          assert = chai.assert;

      window.onload = function () {
        mocha.run();
      };

      <% if Konacha.interface == :bdd %>
        beforeEach(function() {
          document.getElementById('konacha').innerHTML = "";
        });
      <% elsif Konacha.interface == :tdd %>
        setup(function() {
          document.getElementById('konacha').innerHTML = "";
        });
      <% end %>
    </script>
    <%= spec_include_tag *@specs %>
  </head>
  <body>
    <div id="mocha"></div>
    <div id="konacha"></div>
  </body>
</html>
